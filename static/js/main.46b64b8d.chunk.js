(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(t,e,a){},33:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),c=a(22),s=a.n(c),i=(a(30),a(16)),o=a(2),u=a(3),l=a(5),d=a(4),b=a(7),j=a(6),h=a.n(j),m=a(9),O=a(15),p=a(18),f="user",v=function(t){return localStorage.setItem(f,JSON.stringify(t))},x=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},g=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(f));null===e&&(e={}),x(e)(t)}))},k=function(t){return new Promise((function(e){v(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),t)),x("OK")(e)}))},y=a(0),N=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("img",{className:"loading",src:"https://olaargentina.com/wp-content/uploads/2019/11/loading-gif-transparent-10.gif",alt:"loading..."})}}]),a}(r.a.Component),S=N,C=(a(33),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(O.a)({},n,r))},t.btnDisabled=function(){if(t.state.username.length<3)return!0},t.btnCreateUser=Object(m.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.state.username,t.setState({isLogged:!1,loading:!0},Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({name:a});case 2:t.setState({isLogged:!0,loading:!1});case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),t.handleChange=t.handleChange.bind(Object(p.a)(t)),t.state={username:"",isLogged:!1,loading:!1},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.username,a=t.loading,n=t.isLogged;return Object(y.jsx)("main",{children:Object(y.jsxs)("div",{"data-testid":"page-login",children:[Object(y.jsxs)("h1",{className:"trybetunes",children:["Trybe",Object(y.jsx)("span",{className:"titleSpan",children:"Tunes"})]}),Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("form",{className:"loginBox",children:[Object(y.jsx)("h2",{children:"LOGIN"}),Object(y.jsx)("input",{type:"text",placeholder:"Username",name:"username",value:e,onChange:this.handleChange,"data-testid":"login-name-input"}),Object(y.jsx)("button",{className:"loginBtn",type:"button",name:"loginBtn",onClick:this.btnCreateUser,disabled:this.btnDisabled(),"data-testid":"login-submit-button",children:"Entrar"}),a&&Object(y.jsx)(S,{}),n&&Object(y.jsx)(b.a,{to:"/search"})]})})]})})}}]),a}(r.a.Component)),w=a(13),I=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).renderHeader=Object(m.a)(h.a.mark((function e(){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:a=e.sent,n=a.name,t.setState({name:n,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.state={name:"",loading:!0},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.renderHeader()}},{key:"render",value:function(){var t=this.state,e=t.name,a=t.loading;return Object(y.jsxs)("div",{"data-testid":"header-component",children:[Object(y.jsxs)("h1",{className:"trybetunes",children:["Trybe",Object(y.jsx)("span",{className:"titleSpan",children:"Tunes"})]}),a?"":Object(y.jsxs)("h1",{className:"username","data-testid":"header-user-name",children:["Ol\xe1,",e]}),Object(y.jsxs)("div",{className:"menu",children:[Object(y.jsx)(w.b,{to:"/search","data-testid":"link-to-search",children:Object(y.jsx)("nav",{children:" Search "})}),Object(y.jsx)(w.b,{to:"/favorites","data-testid":"link-to-favorites",children:Object(y.jsx)("nav",{children:" Favorites "})}),Object(y.jsx)(w.b,{to:"/profile","data-testid":"link-to-profile",children:Object(y.jsx)("nav",{children:" Profile "})})]})]})}}]),a}(r.a.Component),B=function(){var t=Object(m.a)(h.a.mark((function t(e){var a,n,r,c,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=encodeURI(e).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),t.next=4,fetch(n);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results,i=s.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=B,F=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.albumName,a=t.artistName,n=t.albumImg,r=t.id;return Object(y.jsxs)("div",{className:"albumCard",children:[Object(y.jsx)("h2",{children:e}),Object(y.jsx)("h3",{children:a}),Object(y.jsx)("img",{src:n,alt:e}),Object(y.jsx)(w.b,{to:"/album/".concat(r),"data-testid":"link-to-album-".concat(r),children:"Mais informa\xe7\xf5es"})]})}}]),a}(r.a.Component),P=F,U=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.searchArray,a=t.artist;return e.length<=0?Object(y.jsx)("h2",{children:"Nenhum \xe1lbum foi encontrado"}):Object(y.jsxs)("section",{children:[Object(y.jsxs)("h2",{children:["Resultado de \xe1lbuns de:\xa0",a]}),e.map((function(t){var e=t.collectionId,a=t.collectionName,n=t.artworkUrl100,r=t.artistName;return Object(y.jsx)(P,{id:e,artistName:r,albumName:a,albumImg:n},e)}))]})}}]),a}(r.a.Component),A=U,T=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(O.a)({},n,r))},t.btnDisabled=function(){if(t.state.searchBar.length<2)return!0},t.btnSearch=Object(m.a)(h.a.mark((function e(){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),a=t.state.searchBar,e.next=4,D(a);case 4:n=e.sent,t.setState({artistAlbuns:n,searchBar:"",loading:!1,artistName:a});case 6:case"end":return e.stop()}}),e)}))),t.state={searchBar:"",loading:!1,artistName:"",artistAlbuns:[]},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.searchBar,a=t.loading,n=t.artistAlbuns,r=t.artistName;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(I,{}),Object(y.jsxs)("div",{className:"searchContainer",children:[Object(y.jsx)("input",{className:"musicSearch",name:"searchBar",value:e,placeholder:"Nome do Artista",onChange:this.handleChange,"data-testid":"search-artist-input"}),Object(y.jsx)("button",{className:"searchButton",type:"button",disabled:this.btnDisabled(),"data-testid":"search-artist-button",onClick:this.btnSearch,children:"Pesquisar"})]}),Object(y.jsx)("div",{children:a?Object(y.jsx)(S,{}):Object(y.jsx)(A,{searchArray:n,artist:r})})]})}}]),a}(r.a.Component),J=function(){var t=Object(m.a)(h.a.mark((function t(e){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,t.abrupt("return",n.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=J,L=a(25),K="favorite_songs";JSON.parse(localStorage.getItem(K))||localStorage.setItem(K,JSON.stringify([]));var E=function(){return JSON.parse(localStorage.getItem(K))},H=function(t){return localStorage.setItem(K,JSON.stringify(t))},R=function(t){return function(e){setTimeout((function(){e(t)}),500)}},q=function(t){return new Promise((function(e){if(t){var a=E();H([].concat(Object(L.a)(a),[t]))}R("OK")(e)}))},G=function(t){return new Promise((function(e){var a=E();H(a.filter((function(e){return e.trackId!==t.trackId}))),R("OK")(e)}))},_=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).favCheck=function(e){t.setState({check:e})},t.handleChange=function(e,a){var n=e.target.checked;t.setState({check:n,loading:!0},(function(){return t.manageFavorite(a)}))},t.manageFavorite=function(){var e=Object(m.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.check){e.next=7;break}return e.next=4,q(a);case 4:t.setState({loading:!1}),e.next=10;break;case 7:return e.next=9,G(a);case 9:t.setState({loading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={loading:!1,check:!1},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.favSongs;this.favCheck(t)}},{key:"render",value:function(){var t=this,e=this.props,a=e.musicPlayer,n=e.musicName,r=e.trackId,c=e.allTracks,s=this.state,i=s.loading,o=s.check;return Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:n}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(y.jsx)("code",{children:"audio"}),"."]}),Object(y.jsxs)("label",{htmlFor:"favorite",children:[Object(y.jsx)("input",{id:r,type:"checkbox",checked:o,onChange:function(e){return t.handleChange(e,c)},"data-testid":"checkbox-music-".concat(r)}),"Favorita"]}),i?Object(y.jsx)("p",{children:"Carregando..."}):""]})}}]),a}(r.a.Component),z=_,Q=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).getFavorites=Object(m.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(t){var e=E();R(e)(t)}));case 2:a=e.sent,t.setState({favSongs:a,loadFav:!0});case 4:case"end":return e.stop()}}),e)}))),t.getAlbumMusics=Object(m.a)(h.a.mark((function e(){var a,n,r,c,s,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),a=t.props.match.params.id,e.next=4,M(a);case 4:n=e.sent,r=n[0],c=r.artistName,s=r.artworkUrl100,i=r.collectionName,o=n.filter((function(t,e){return 0!==e})),t.setState({loading:!1,album:o,artist:c,albumName:i,albumImg:s});case 11:case"end":return e.stop()}}),e)}))),t.state={loading:!1,album:[],artist:"",albumName:"",albumImg:"",favSongs:[],loadFav:!1},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAlbumMusics()}},{key:"componentDidUpdate",value:function(){this.getFavorites()}},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.album,n=t.artist,r=t.albumName,c=t.albumImg,s=t.favSongs,i=t.loadFav;return Object(y.jsxs)("div",{"data-testid":"page-album",children:[Object(y.jsx)(I,{}),e&&Object(y.jsx)(S,{}),i&&Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{"data-testid":"artist-name",children:n}),Object(y.jsx)("img",{src:c,alt:r}),Object(y.jsx)("h3",{"data-testid":"album-name",children:r}),a.map((function(t,e){return Object(y.jsx)(z,{musicPlayer:t.previewUrl,musicName:t.trackName,trackId:t.trackId,favSongs:s.some((function(e){return e.trackId===t.trackId})),allTracks:t},e)}))]})]})}}]),a}(r.a.Component),V=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-favorites",children:Object(y.jsx)(I,{})})}}]),a}(r.a.Component),W=V,X=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-profile",children:Object(y.jsx)(I,{})})}}]),a}(r.a.Component),Y=X,Z=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-profile-edit",children:Object(y.jsx)(I,{})})}}]),a}(r.a.Component),$=Z,tt=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-not-found",children:"NOT FOUND"})}}]),a}(r.a.Component),et=tt,at=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(y.jsx)("main",{children:Object(y.jsxs)(b.d,{children:[Object(y.jsx)(b.b,{exact:!0,path:"/trybetunes",component:C}),Object(y.jsx)(b.b,{exact:!0,path:"/album/:id",render:function(t){return Object(y.jsx)(Q,Object(i.a)({},t))}}),Object(y.jsx)(b.b,{exact:!0,path:"/favorites",component:W}),Object(y.jsx)(b.b,{exact:!0,path:"/profile/edit",component:$}),Object(y.jsx)(b.b,{exact:!0,path:"/profile",component:Y}),Object(y.jsx)(b.b,{exact:!0,path:"/search",component:T}),Object(y.jsx)(b.b,{component:et})]})})}}]),a}(r.a.Component),nt=at;s.a.render(Object(y.jsx)(w.a,{children:Object(y.jsx)(nt,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.46b64b8d.chunk.js.map